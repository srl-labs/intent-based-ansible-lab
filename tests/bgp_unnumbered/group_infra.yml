leaf:
  interfaces:
    ethernet-1/1:
      admin_state: enable
      vlan_tagging: yes
    ethernet-1/2:
      admin_state: enable
      vlan_tagging: yes
    ethernet-1/3:
      admin_state: enable
      vlan_tagging: yes
    ethernet-1/4:
      admin_state: enable
      vlan_tagging: yes
    ethernet-1/10:
      admin_state: enable
      vlan_tagging: yes
    ethernet-1/48:
      admin_state: enable
      _tag: isl
    ethernet-1/49:
      admin_state: enable
      _tag: isl
    irb1:
    system0:
      admin_state: enable
  subinterface:
    ethernet-1/48.0:
      ipv6:
        ra: enable
    ethernet-1/49.0:
      ipv6:
        ra: enable
  network_instance:
    default:
      receive-ipv4-check: false
      interfaces:
        - system0.0
        - ethernet-1/48.0
        - ethernet-1/49.0
      autonomous-system: "{{ asn }}"
      router-id: "{{ router_id }}"
      protocols:
        bgp:
          dynamic:
            interfaces:
              ethernet-1/48.0:
                allow-as: [ 65100 ]
                peer-group: spines
              ethernet-1/49.0:
                allow-as: [ 65100 ]
                peer-group: spines
          neighbor:
            192.168.255.101:
              peer_group: overlay
            192.168.255.102:
              peer_group: overlay
          ipv4:
            admin_state: enable
            multipath: 8
          group:
            overlay:
              peer_as: "{{ overlay_asn }}"
              export_policy: pass-evpn
              import_policy: pass-evpn
              ipv4:
                admin_state: disable
              evpn:
                admin_state: enable
              local_as: "{{ overlay_asn }}"
              local_address: "{{ router_id }}"
            spines:
              description: "Peer-group for spine neighbors"
              export_policy: lo-and-servers
              import_policy: pass-all
              peer_as: 65100
              ipv4:
                admin_state: enable
              epvn:
                admin_state: disable
#
spine:
  interfaces:
    ethernet-1/1:
      admin_state: enable
      _tag: isl
    ethernet-1/2:
      admin_state: enable
      _tag: isl
    ethernet-1/3:
      admin_state: enable
      _tag: isl
    ethernet-1/4:
      admin_state: enable
      _tag: isl
    system0:
      admin_state: enable
  subinterface:
    ethernet-1/1.0:
      ipv6:
        ra: enable
    ethernet-1/2.0:
      ipv6:
        ra: enable
    ethernet-1/3.0:
      ipv6:
        ra: enable
    ethernet-1/4.0:
      ipv6:
        ra: enable
  network_instance:
    default:
      receive-ipv4-check: false
      interfaces:
        - system0.0
        - ethernet-1/1.0
        - ethernet-1/2.0
        - ethernet-1/3.0
        - ethernet-1/4.0
      autonomous-system: "{{ asn }}"
      router-id: "{{ router_id }}"
      protocols:
        bgp:
          dynamic:
            interfaces:
              ethernet-1/1.0:
                allow-as: [ 65001 ]
                peer-group: leafs
              ethernet-1/2.0:
                allow-as: [ 65002 ]
                peer-group: leafs
              ethernet-1/3.0:
                allow-as: [ 65003 ]
                peer-group: leafs
              ethernet-1/4.0:
                allow-as: [ 65004 ]
                peer-group: leafs
          ipv4:
            admin_state: enable
          neighbor:
            192.168.255.1:
              peer_group: overlay
            192.168.255.2:
              peer_group: overlay
            192.168.255.3:
              peer_group: overlay
            192.168.255.4:
              peer_group: overlay
          group:
            overlay:
              peer_as: "{{ overlay_asn }}"
              export_policy: pass-evpn
              import_policy: pass-evpn
              ipv4:
                admin_state: disable
              evpn:
                admin_state: enable
              local_as: "{{ overlay_asn }}"
              local_address: "{{ router_id }}"
              cluster_id: "{{ router_id }}"
            leafs:
              description: "Peer-group for leaf neighbors"
              export_policy: pass-all
              import_policy: pass-all
              ipv4:
                admin_state: enable
              epvn:
                admin_state: disable
srl:
  _features:
    auto_itf_desc: no # generate itf-desription from LLDP state
  system:
    lldp:
      admin-state: enable
    information:
      location: "Somewhere"
      contact: "John Doe"
  routing_policy:
    prefix_set:
      loopbacks:
        prefix:
          - ip-prefix: 192.168.255.0/24
            mask-length-range: "32..32"
      servers:
        prefix:
          - ip-prefix: 10.0.0.0/8
            mask-length-range: "24..32"
    policy:
      export-loopbacks:
        default-action:
          policy-result: reject
        statement:
          - name: "1"
            match:
              prefix-set: loopbacks
            action:
              policy-result: accept
      lo-and-servers:
        default-action:
          policy-result: reject
        statement:
          - name: "10"
            match:
              prefix-set: loopbacks
            action:
              policy-result: accept
          - name: "20"
            match:
              prefix-set: servers
            action:
              policy-result: accept
      pass-all:
        default-action:
          policy-result: accept
        statement:
          - name: "1"
            match:
              protocol: bgp
            action:
              policy-result: accept
      pass-evpn:
        default-action:
          policy-result: accept
        statement:
          - name: "1"
            match:
              protocol: bgp-evpn
            action:
              policy-result: accept
